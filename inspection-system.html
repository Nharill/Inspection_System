<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Page Navigation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Format Display Styles - Using your exact layout */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        
        .format-display-container {
            font-family: 'Inter', sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .form-pages-wrapper {
            display: flex;
            flex-direction: column; /* Changed to column for live view as well */
            gap: 20px;
            justify-content: center;
            align-items: center;
            flex-wrap: nowrap;
        }

        .form-container {
            background-color: #fff;
            border: 1px solid #000;
            padding: 25px 30px;
            width: 8.5in;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            position: relative;
            font-family: 'Inter', sans-serif;
            font-size: 11pt;
            overflow: visible;
        }
        
        /* New Checkbox Styles for the formatted display forms */
        .form-container .checkbox-item input[type="checkbox"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border: 1px solid black;
            width: 14px;
            height: 14px;
            margin-right: 8px;
            cursor: default; /* Disable cursor change for disabled checkboxes */
            position: relative;
            background-color: white;
            flex-shrink: 0;
        }

        .form-container .checkbox-item input[type="checkbox"]:checked {
            background-color: green;
            border-color: green;
        }
        
        .form-container .checkbox-item input[type="checkbox"]:checked::after {
            content: '‚úì';
            color: white;
            font-size: 10px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            line-height: 1;
            font-weight: bold;
        }

        /* --- Print Specific Styles --- */
        @media print {
            body {
                background-color: #fff !important;
                padding: 0 !important;
                margin: 0 !important;
                display: block !important;
            }
            
            /* Checkbox styles for print */
            .form-container .checkbox-item input[type="checkbox"] {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                border: 1px solid black !important;
                background-color: white !important;
            }
            
            .form-container .checkbox-item input[type="checkbox"]:checked {
                background-color: green !important;
                border-color: green !important;
            }

            /* Set Legal page size and margins for printing */
            @page {
                size: legal portrait;
                margin: 0.25in 0.25in !important; /* Adjusted margins for better fit */
            }

            .form-pages-wrapper {
                flex-direction: column !important;
                flex-wrap: nowrap !important;
                justify-content: flex-start !important;
                align-items: center !important;
                gap: 4px !important;
                width: 100% !important;
                max-width: none !important;
                /* Adjusted scale to ensure it fits consistently within print margins */
                transform: scale(0.9) !important;
                transform-origin: top center !important;
                margin-top: 30px !important; /* Moved the forms down */
                margin-bottom: 0px !important;
                padding: 0 !important;
            }

            .form-container {
                box-shadow: none !important;
                border: 1px solid #000 !important;
                page-break-inside: avoid !important;
                width: 8in !important; /* Adjusted width for print */
                height: auto !important;
                max-height: none !important;
                margin: 0 !important;
                padding: 12px 18px !important;
                flex-shrink: 0 !important;
                box-sizing: border-box !important;
                background: white !important;
                overflow: visible !important;
                font-size: 10pt !important;
            }
            .header-text, .control-info, .checkbox-item label, .input-label, .documentary-requirements-title, .remarks-legend p, .first-table-container th, .first-table-container td, .bottom-left-table-container td {
                font-size: 0.8em !important;
                line-height: 1.2 !important;
            }
            
            .first-table-container th, .first-table-container td, .bottom-left-table-container td {
                font-size: 0.7em !important;
                padding: 3px !important;
                line-height: 1.2 !important;
            }

            /* Ensure all lines remain visible and are exactly 1px black */
            .section-divider,
            .input-field,
            .control-no-line,
            .first-table-container th,
            .first-table-container td,
            .first-table-container table,
            .bottom-left-table-container table,
            .bottom-left-table-container td {
                border-color: #000 !important;
                border-width: 1px !important;
                background-color: transparent !important;
            }

            /* Make sure text is black */
            body, .copy-label, .header-text, .control-info, .form-title, .checkbox-item label, .input-label, .documentary-requirements-title, .remarks-legend p, .first-table-container th, .first-table-container td, .bottom-left-table-container td {
                color: #000 !important;
            }

            .form-title {
                font-size: 0.9rem !important;
                margin: 4px 0 !important;
            }
            
            .control-no-line {
                font-size: 0.8rem !important;
                min-height: 18px !important;
                padding: 4px !important;
            }

            /* Remove background from copy labels for print */
            .copy-label {
                background-color: transparent !important;
                font-size: 0.8rem !important;
                padding: 2px 4px !important;
                top: 65px !important; /* Adjusted for new form position */
            }
            
            .copy-label-inline {
                background-color: transparent !important;
                font-size: 1rem !important;
                padding: 3px 6px !important;
                border: 1px solid !important;
            }

            /* Hide elements not needed in print */
            .no-print {
                display: none !important;
            }
            
            .format-display-container {
                background: white !important;
                padding: 0 !important;
                margin: 0 !important;
                min-height: auto !important;
            }
            
            /* Optimize text and elements for print */
            .control-no-line {
                color: #000 !important;
                font-weight: bold !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            
            /* Prevent page breaks and overlapping within forms */
            .header-section,
            .form-row,
            .checkbox-group,
            .documentary-requirements,
            .main-content-wrapper {
                page-break-inside: avoid;
            }
            
            /* Reduce spacing between elements for compact appearance */
            .checkbox-group {
                margin-bottom: 5px !important;
            }
            
            .section-divider {
                margin: 4px 0 !important;
            }
            
            .input-row {
                margin-bottom: 4px !important;
            }
            
            /* Smaller input fields */
            .input-field, .control-no-line {
                min-height: 12px !important;
                line-height: 1.1 !important;
                padding: 2px 3px !important;
            }
            
            /* Reduce header section spacing */
            .header-section {
                margin-bottom: 3px !important;
            }
            
            /* Reduce form title spacing */
            .form-title {
                margin-top: 3px !important;
                margin-bottom: 3px !important;
            }
            
            /* Reduce documentary requirements spacing */
            .documentary-requirements {
                margin-top: 3px !important;
                margin-bottom: 3px !important;
            }
            
            /* Reduce main content wrapper spacing */
            .main-content-wrapper {
                gap: 3px !important;
                margin-top: 3px !important;
            }
            
            /* Smaller logo for print */
            .logo {
                width: 80px !important;
                height: auto !important;
            }
            
            /* Larger table cells to maximize space */
            .first-table-container td {
                height: 22px !important;
            }
            
            .bottom-left-table-container td {
                height: 22px !important;
            }

            /* Fix copy label positioning */
            .copy-label {
                position: absolute !important;
                top: 65px !important;
                right: 15px !important;
                font-size: 0.5rem !important;
                padding: 1px 3px !important;
            }

            /* Optimize documentary requirements grid */
            .documentary-requirements-grid {
                gap: 1px 8px !important;
            }

            /* Optimize checkbox items */
            .checkbox-item {
                margin-bottom: 1px !important;
            }

            /* Optimize top section layout */
            .top-section {
                gap: 2px !important;
            }

            .remarks-legend {
                width: 120px !important;
                padding-top: 4px !important;
            }

            .first-table-container {
                max-width: 580px !important;
            }

            /* Ensure forms don't exceed page boundaries */
            .form-container:first-child {
                margin-bottom: 2px !important;
            }

            .form-container:last-child {
                margin-top: 2px !important;
            }
            
            /* Changes for the bottom table to make it a single column */
            .bottom-left-table-container table {
                border-collapse: collapse !important;
            }
            .bottom-left-table-container td {
                border: none !important;
                border-bottom: 1px solid black !important;
            }
            .bottom-left-table-container tr:last-child td {
                border-bottom: none !important;
            }
        }

        /* Header section containing logo, main text, and control info */
        .header-section {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        /* Styling for the PUP logo */
        .logo {
            width: 70px;
            height: auto;
            margin-right: 10px;
            flex-shrink: 0;
            padding-top: 3px;
        }

        /* Text content in the header (Republic of the Philippines, etc.) */
        .header-text {
            flex-grow: 1;
            font-size: 0.7rem;
            line-height: 1.1;
            padding-top: 5px;
            font-weight: bold;
            text-align: left;
            padding-left: 5px;
        }
        .header-text p {
            margin: 0;
            padding: 0;
        }

        .header-text h1 {
            font-size: 14pt;
            font-weight: bold;
            margin: 0 0 2px 0;
            text-transform: uppercase;
        }

        .header-text h2 {
            font-size: 12pt;
            font-weight: bold;
            margin: 0 0 2px 0;
            text-transform: uppercase;
        }

        /* Control number and date information */
        .control-info {
            text-align: right;
            font-size: 0.65rem;
            line-height: 1.1;
            margin-left: auto;
            padding-top: 5px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .control-info p {
            margin: 0;
            padding: 0;
        }
        .control-no-line {
            border: none;
            border-bottom: 1px solid #000;
            background: transparent;
            min-height: 18px;
            margin-top: 2px;
            width: 100%;
            padding: 2px 4px;
            font-size: 0.7rem;
            outline: none;
        }

        /* Main title for the request form */
        .form-title {
            font-weight: bold;
            font-size: 0.9rem;
            margin-top: 6px;
            margin-bottom: 8px;
            text-align: left;
            padding-bottom: 2px;
        }

        .form-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            min-height: 20px;
        }

        .form-row label {
            font-size: 10pt;
            margin-right: 8px;
            white-space: nowrap;
        }

        .form-row input[type="text"], .form-row input[type="email"], .form-row input[type="tel"] {
            border: none;
            border-bottom: 1px solid #000;
            background: transparent;
            font-size: 10pt;
            padding: 2px 4px;
            margin: 0 4px;
            flex: 1;
            min-width: 0;
        }

        .form-row input[type="text"]:focus, .form-row input[type="email"]:focus, .form-row input[type="tel"]:focus {
            outline: none;
            border-bottom: 2px solid #000;
        }

        /* Checkbox groups for types of inspection */
        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px 20px;
            margin-bottom: 8px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            font-size: 0.7rem;
            width: 100%;
            margin-bottom: 4px;
        }
        .checkbox-item input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(0.9);
            min-width: 14px;
            min-height: 14px;
        }
        .checkbox-item label {
            line-height: 1.2;
        }

        /* Horizontal divider lines */
        .section-divider {
            border-bottom: 1px solid #000;
            margin-bottom: 8px;
        }

        /* Rows for input fields (Date, Requested by, etc.) */
        .input-row {
            display: flex;
            align-items: baseline;
            margin-bottom: 6px;
            width: 100%;
        }
        .input-label {
            font-size: 0.7rem;
            white-space: nowrap;
            margin-right: 8px;
            flex-shrink: 0;
            min-width: 180px;
            text-align: left;
        }
        .input-field {
            flex: 1;
            border: none;
            border-bottom: 1px solid #000;
            background: transparent;
            min-height: 18px;
            margin-right: 15px;
            padding: 2px 4px;
            font-size: 0.7rem;
            outline: none;
        }
        .input-row .ml-10 {
            margin-left: 0;
            min-width: 180px;
            text-align: left;
        }

        /* Documentary Requirements section */
        .documentary-requirements {
            margin-top: 8px;
            margin-bottom: 10px;
        }
        .documentary-requirements-title {
            font-size: 0.7rem;
            font-weight: bold;
            margin-bottom: 6px;
            display: flex;
            flex-direction: column;
        }
        .documentary-requirements-title .instructions {
            text-align: center;
            font-style: italic;
            font-weight: bold;
            font-size: 0.8em;
            margin-bottom: 5px;
        }
        
        .documentary-requirements-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px 20px;
        }
        .documentary-requirements-grid .checkbox-item {
            width: auto;
            margin-bottom: 0;
        }
        .documentary-requirements-grid .checkbox-item .input-field {
            margin-left: 10px;
            min-height: 16px;
        }

        .underline-field {
            border: none;
            border-bottom: 1px solid #000;
            background: transparent;
            min-width: 200px;
            display: inline-block;
            padding: 2px 4px;
            margin: 0 4px;
            font-size: 0.7rem;
            outline: none;
        }

        .control-no-line {
            border: none;
            border-bottom: 1px solid #000;
            background: transparent;
            min-height: 18px;
            margin-top: 2px;
            width: 100%;
            padding: 2px 4px;
            font-size: 0.7rem;
            outline: none;
        }

        .signature-section {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        .signature-box {
            text-align: center;
            width: 200px;
        }

        .signature-line {
            border-bottom: 1px solid #000;
            height: 40px;
            margin-bottom: 5px;
        }

        /* Copy labels (IMO COPY, SECOND COPY) */
        .copy-label {
            position: absolute;
            font-size: 1.1rem;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: Arial, sans-serif;
        }
        .copy-label-inline {
            font-size: 1.4rem;
            font-weight: bold;
            padding: 6px 12px;
            border-radius: 6px;
            font-family: Arial, sans-serif;
            display: inline-block;
        }
        .imo-copy {
            color: #D32F2F;
            background-color: #FFCDD2;
            border: 1px solid #D32F2F;
            top: 102px;
            right: 30px;
        }
        .second-copy {
            color: #388E3C;
            background-color: #C8E6C9;
            border: 1px solid #388E3C;
            top: 102px;
            right: 30px;
        }

        .textarea-field {
            border: 1px solid #000;
            width: 100%;
            min-height: 60px;
            padding: 5px;
            font-size: 10pt;
            font-family: 'Inter', sans-serif;
            resize: vertical;
        }

        .textarea-field:focus {
            outline: none;
            border: 2px solid #000;
        }

        .amount-section {
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #000;
        }

        .amount-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .amount-input {
            border: none;
            border-bottom: 1px solid #000;
            background: transparent;
            text-align: right;
            width: 120px;
            font-size: 10pt;
            padding: 2px 4px;
        }

        .total-row {
            border-top: 2px solid #000;
            padding-top: 5px;
            font-weight: bold;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .format-display-container {
                padding: 10px;
            }
            
            .form-container {
                padding: 15px;
                font-size: 10pt;
                width: 100%;
                max-width: 100%;
            }
            
            .logo {
                width: 2cm;
                height: 2cm;
            }
            
            .header-text h1 {
                font-size: 12pt;
            }
            
            .header-text h2 {
                font-size: 11pt;
            }
            
            .checkbox-group {
                gap: 10px;
            }
            
            .signature-section {
                flex-direction: column;
                gap: 20px;
            }
            
            .signature-box {
                width: 100%;
            }
            
            .form-pages-wrapper {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Hide elements that shouldn't be printed */
        .no-print {
            display: block;
        }

        /* --- New styles for the table and remarks section --- */
        .main-content-wrapper {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
            width: 100%;
            box-sizing: border-box;
        }
        .top-section {
            display: flex;
            flex-direction: row;
            gap: 10px;
            align-items: flex-start;
            width: 100%;
            box-sizing: border-box;
            margin: 0 10px;
        }
        .remarks-legend {
            flex-shrink: 0;
            width: 140px;
            padding-top: 8px;
        }
        .remarks-legend p {
            margin: 0;
            line-height: 1.2;
            font-size: 0.7rem;
            display: inline-block;
            margin-right: 15px;
        }
        .remarks-legend p:first-child {
            display: block;
            margin-bottom: 5px;
            margin-right: 0;
        }
        .remarks-legend p b {
            font-weight: bold;
            margin-right: 3px;
        }
        .remarks-legend i {
            font-style: italic;
        }
        /* Styling for the first table */
        .first-table-container {
            flex-grow: 1;
            width: calc(100% - 160px);
            max-width: 650px;
            flex-shrink: 0;
        }
        .first-table-container table {
            border-collapse: collapse;
            width: 100%;
            border: 1px solid black;
        }
        .first-table-container th,
        .first-table-container td {
            border: 1px solid black;
            padding: 4px;
            text-align: center;
            box-sizing: border-box;
            font-size: 0.65rem;
        }
        .first-table-container th {
            background-color: #f2f2f2;
            font-weight: bold;
            font-size: 0.65rem;
            line-height: 1.1;
        }

        /* Specific widths for the first table columns */
        .first-table-container th:nth-child(1) { width: 25%; }
        .first-table-container th:nth-child(2) { width: 25%; }
        .first-table-container th:nth-child(3) { width: 35%; }
        .first-table-container th:nth-child(4) { width: 15%; }

        .first-table-container td {
            height: 25px;
            font-size: 0.65rem;
        }

        /* Styling for the inspector information section */
        .bottom-section {
            width: 100%;
            margin-top: 8px;
        }
        
        .inspector-info-section {
            width: 100%;
            max-width: 600px;
        }
        
        .inspector-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 10px;
        }
        
        .inspector-label {
            font-size: 0.7rem;
            font-weight: normal;
            white-space: nowrap;
            min-width: 80px;
        }
        
        .inspector-field {
            flex: 1;
            border-bottom: 1px solid #000;
            min-height: 18px;
            margin-right: 20px;
        }
        
        .inspector-field-small {
            width: 120px;
            border-bottom: 1px solid #000;
            min-height: 18px;
        }

        /* Additional form styling */
        .form-section {
            margin-bottom: 15px;
        }

        .section-title {
            font-weight: bold;
            font-size: 11pt;
            margin-bottom: 8px;
            text-decoration: underline;
        }

        .inline-checkbox {
            display: inline-flex;
            align-items: center;
            margin-right: 20px;
            font-size: 10pt;
        }

        .inline-checkbox input[type="checkbox"] {
            margin-right: 5px;
            transform: scale(1.1);
        }

        .date-field {
            border-bottom: 1px solid #000;
            min-width: 100px;
            display: inline-block;
            padding: 2px 4px;
            margin: 0 4px;
            text-align: center;
        }

        /* Ensure proper spacing for form elements */
        .form-row.spaced {
            margin-bottom: 12px;
        }

        .form-row.compact {
            margin-bottom: 4px;
        }

        /* Style for required fields */
        .required-field {
            border-bottom: 2px solid #000;
        }

        /* Style for readonly fields */
        .readonly-field {
            background-color: #f5f5f5;
            border-bottom: 1px solid #666;
        }

        /* New styles for the single-column table in the generated form */
        .inspector-signature-row {
            display: flex;
            align-items: center;
            height: 35px;
            font-size: 0.65rem;
            border: 1px solid black;
            padding: 6px;
        }
        /* Style to make it look like a single column, but keep borders between rows */
        .bottom-left-table-container.flex-col > .inspector-signature-row:not(:last-child) {
            border-bottom: none;
        }
        .bottom-left-table-container.flex-col > .inspector-signature-row:first-child {
            border-bottom: 1px solid black;
        }
    </style>
</head>
<body>
    <!-- Data Privacy Act Modal - Always shows first -->
    <div id="privacyModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999]" style="display: none;">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <!-- Header -->
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-red-600 text-3xl">‚ö†Ô∏è</span>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Data Privacy Act Notice</h2>
                    <p class="text-lg font-semibold text-red-600">Republic Act No. 10173 - Data Privacy Act of 2012</p>
                    <p class="text-sm text-gray-600 mt-2">Please read this notice carefully before to proceed</p>
                </div>

                <!-- Notice Content -->
                <div class="space-y-6 text-sm text-gray-700">
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">üìã Data Collection Notice:</h3>
                        <p class="mb-3">This Inspection Request System will collect the following personal information:</p>
                        <ul class="list-disc list-inside space-y-1 ml-4">
                            <li>Contact number and email addresses</li>
                            <li>Full name and office/department information</li>
                            <li>Disbursing officer details and sector information</li>
                            <li>Purchase details, purpose, and financial information</li>
                        </ul>
                    </div>

                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">üõ°Ô∏è Your Rights:</h3>
                        <p>You have the right to be informed, access, rectify, erase, restrict processing, data portability, and object to processing of your personal data.</p>
                    </div>

                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">üéØ Purpose:</h3>
                        <p>Data collected will be used solely for processing inspection requests and maintaining official records as required by institutional procedures.</p>
                    </div>

                    <div>
                        <h3 class="font-semibold text-gray-900 mb-2">üíæ Storage & Security:</h3>
                        <p>Information is stored securely in your browser's local storage and will be retained according to institutional record-keeping policies. Data is not transmitted to external servers.</p>
                    </div>

                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <h3 class="font-semibold text-yellow-800 mb-2">‚ö†Ô∏è Consent Required:</h3>
                        <p class="text-yellow-700">By clicking "I Agree & Continue", you consent to the collection and processing of your personal data as described above in accordance with the Data Privacy Act of 2012.</p>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h3 class="font-semibold text-blue-800 mb-2">‚ÑπÔ∏è Contact Information:</h3>
                        <p class="text-blue-700">For questions about data privacy or to exercise your rights, contact the PUP Data Protection Officer.</p>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4 mt-8">
                    <button id="disagreePrivacyButton"
                            class="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg">
                        I Disagree / Exit
                    </button>
                    <button id="agreePrivacyButton"
                            class="flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg">
                        I Agree & Continue
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-white flex flex-col items-center justify-center z-[9998]">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mb-4"></div>
        <p class="text-gray-700 text-lg font-semibold">Initializing app. Please wait...</p>
    </div>

    <!-- Navigation Container -->
    <div id="navigationContainer" class="hidden min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
        <!-- Header -->
        <div class="bg-white shadow-lg border-b-4 border-blue-600">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-6">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                            <span class="text-white text-2xl">üèõÔ∏è</span>
                        </div>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Inspection Request System</h1>
                            <p class="text-sm text-gray-500">User ID: <span id="displayUserId" class="font-mono text-xs"></span></p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div>
                            <p class="text-sm text-gray-500">Welcome</p>
                            <p class="text-sm text-gray-700 font-medium">User</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <!-- Welcome Section -->
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Request for Inspection</h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    Select the type of inspection you need. Each option will guide you through the specific requirements and documentation needed.
                </p>
            </div>

            <!-- Navigation Cards -->
            <div id="navigationCards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Operations Purchase Card -->
                <div class="group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 overflow-hidden">
                    <div class="p-8">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <span class="text-white text-3xl">üíª</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Operations Purchase</h3>
                        <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                            Request inspection for operational purchases (supplies, materials, and equipment).
                        </p>
                        <button data-form-type="purchases"
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg">
                            Start Request
                        </button>
                    </div>
                    <div class="h-2 bg-gradient-to-r from-blue-500 to-blue-600"></div>
                </div>

                <!-- UCSS Purchase Card -->
                <div class="group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 overflow-hidden">
                    <div class="p-8">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <span class="text-white text-3xl">üõí</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">UCSS Purchase</h3>
                        <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                            Request inspection for UCSS purchases.
                        </p>
                        <button data-form-type="ucss"
                                class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg">
                            Start Request
                        </button>
                    </div>
                    <div class="h-2 bg-gradient-to-r from-green-500 to-green-600"></div>
                </div>

                <!-- Post Repair Card -->
                <div class="group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 overflow-hidden">
                    <div class="p-8">
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <span class="text-white text-3xl">üîß</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Post Repair/Waste Material</h3>
                        <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                            Request inspection for Post-repair inspection and waste material disposal.
                        </p>
                        <button data-form-type="postRepair"
                                class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg">
                            Start Request
                        </button>
                    </div>
                    <div class="h-2 bg-gradient-to-r from-purple-500 to-purple-600"></div>
                </div>

                <!-- Janitorial Services Card -->
                <div class="group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 overflow-hidden">
                    <div class="p-8">
                        <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <span class="text-white text-3xl">üßπ</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-3">Janitorial Supplies and Services</h3>
                        <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                            Request inspection for Janitorial Supplies and Services.
                        </p>
                        <button data-form-type="janitorial"
                                class="w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg">
                            Start Request
                        </button>
                    </div>
                    <div class="h-2 bg-gradient-to-r from-orange-500 to-orange-600"></div>
                </div>
            </div>

            <!-- Additional Information -->
            <div class="mt-16 bg-white rounded-2xl shadow-lg p-8 border border-gray-100">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">üìã How It Works</h3>
                    <p class="text-gray-600 max-w-2xl mx-auto">
                        Our streamlined process ensures your inspection requests are handled efficiently and professionally.
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-blue-600 text-xl font-bold">1</span>
                        </div>
                        <h4 class="font-semibold text-gray-900 mb-2">Select Type</h4>
                        <p class="text-gray-600 text-sm">Choose the appropriate inspection category for your needs.</p>
                    </div>
                    
                    <div class="text-center">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-green-600 text-xl font-bold">2</span>
                        </div>
                        <h4 class="font-semibold text-gray-900 mb-2">Fill Details</h4>
                        <p class="text-gray-600 text-sm">Complete the required information and documentation.</p>
                    </div>
                    
                    <div class="text-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-purple-600 text-xl font-bold">3</span>
                        </div>
                        <h4 class="font-semibold text-gray-900 mb-2">Submit & Track</h4>
                        <p class="text-gray-600 text-sm">Submit your request and track its progress through completion.</p>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="mt-12 text-center">
                <p class="text-gray-500 text-sm">
                    Need help? Contact our support team for assistance with your inspection requests.
                </p>
            </div>
        </div>
    </div>

    <!-- View Forms Container -->
    <div id="viewFormsContainer" class="hidden min-h-screen bg-gray-50 py-8">
        <!-- View forms content will be dynamically inserted here -->
    </div>

    <!-- Form Container (Hidden by default) -->
    <div id="formContainer" class="hidden min-h-screen bg-gray-50 py-8">
        <!-- Form content will be dynamically inserted here -->
    </div>

    <!-- Format Display Container (Hidden by default) -->
    <div id="formatDisplayContainer" class="hidden format-display-container">
        <!-- Formatted forms will be displayed here -->
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, addDoc, collection, runTransaction, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        let currentFormData = {};
        let userId = null;
        let db;
        let auth;
        let appId;

        // Privacy modal functions
        function showPrivacyModal() {
            document.getElementById('privacyModal').style.display = 'flex';
        }

        function agreePrivacy() {
            document.getElementById('privacyModal').style.display = 'none';
            document.getElementById('navigationContainer').style.display = 'block';
            document.getElementById('navigationContainer').classList.remove('hidden');
        }

        function disagreePrivacy() {
            let messageBox = document.createElement('div');
            messageBox.innerHTML = `
                <div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999]">
                    <div class="bg-white rounded-lg p-6 shadow-xl max-w-sm mx-auto">
                        <div class="flex items-center space-x-4 mb-4">
                            <span class="text-yellow-500 text-2xl">‚ö†Ô∏è</span>
                            <h3 class="text-lg font-bold">Consent Required</h3>
                        </div>
                        <p class="text-sm text-gray-700">You must agree to the Data Privacy Act terms to use this system.</p>
                        <div class="flex justify-end mt-6">
                            <button onclick="this.closest('.fixed').remove()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded-lg transition-colors">
                                OK
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(messageBox);
        }

        // Firebase Initialization and Authentication
        async function initializeFirebase() {
            try {
                const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
                appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

                if (Object.keys(firebaseConfig).length === 0) {
                    console.error("Firebase config is missing.");
                    return;
                }

                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        document.getElementById('displayUserId').textContent = userId;
                    } else {
                        userId = null;
                        document.getElementById('displayUserId').textContent = 'Not Authenticated';
                    }

                    document.getElementById('loadingScreen').style.display = 'none';
                    showPrivacyModal();
                });

                const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Error initializing Firebase:", error);
            }
        }
        
        async function generateControlNumber() {
            const date = new Date();
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const datePrefix = `${year}${month}${day}`;

            const counterRef = doc(db, `/artifacts/${appId}/public/data/counters/controlNumber`);

            try {
                const newControlNumber = await runTransaction(db, async (transaction) => {
                    const counterDoc = await transaction.get(counterRef);
                    let currentCounter = 0;
                    if (counterDoc.exists()) {
                        const data = counterDoc.data();
                        const lastControlNumber = data.lastNumber;
                        if (lastControlNumber && lastControlNumber.startsWith(datePrefix)) {
                            const lastSequence = parseInt(lastControlNumber.split('-')[1]);
                            if (!isNaN(lastSequence)) {
                                currentCounter = lastSequence;
                            }
                        }
                    }
                    
                    const nextCounter = currentCounter + 1;
                    const nextSequence = String(nextCounter).padStart(3, '0');
                    const newNumber = `${datePrefix}-${nextSequence}`;
                    
                    transaction.set(counterRef, {
                        lastNumber: newNumber,
                        timestamp: serverTimestamp()
                    });
                    
                    return newNumber;
                });
                return newControlNumber;

            } catch (e) {
                console.error("Transaction failed: ", e);
                return null;
            }
        }

        async function saveFormData(data) {
            try {
                const docRef = await addDoc(collection(db, `/artifacts/${appId}/public/data/inspectionForms`), data);
                console.log("Document written with ID: ", docRef.id);
            } catch (e) {
                console.error("Error adding document: ", e);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Initially show the loading screen
            document.getElementById('loadingScreen').style.display = 'flex';
            initializeFirebase();
            
            document.getElementById('agreePrivacyButton').addEventListener('click', agreePrivacy);
            document.getElementById('disagreePrivacyButton').addEventListener('click', disagreePrivacy);
            
            document.querySelectorAll('[data-form-type]').forEach(button => {
                button.addEventListener('click', () => {
                    navigateToForm(button.getAttribute('data-form-type'));
                });
            });
        });

        function navigateToPage(pageType) {
            document.getElementById('navigationContainer').style.display = 'none';
            document.getElementById('navigationContainer').classList.add('hidden');
            
            window.scrollTo(0, 0);
            
            if (pageType === 'viewForms') {
                document.getElementById('viewFormsContainer').style.display = 'block';
                document.getElementById('viewFormsContainer').classList.remove('hidden');
            } else {
                document.getElementById('formContainer').style.display = 'block';
                document.getElementById('formContainer').classList.remove('hidden');
                loadForm(pageType);
            }
        }

        function navigateToForm(formType) {
            document.getElementById('navigationContainer').style.display = 'none';
            document.getElementById('navigationContainer').classList.add('hidden');
            
            window.scrollTo(0, 0);
            
            document.getElementById('formContainer').style.display = 'block';
            document.getElementById('formContainer').classList.remove('hidden');
            loadForm(formType);
        }

        function startRequest(formType) {
            navigateToForm(formType);
        }

        function goBack() {
            document.getElementById('formContainer').style.display = 'none';
            document.getElementById('formContainer').classList.add('hidden');
            document.getElementById('formatDisplayContainer').style.display = 'none';
            document.getElementById('formatDisplayContainer').classList.add('hidden');
            document.getElementById('viewFormsContainer').style.display = 'none';
            document.getElementById('viewFormsContainer').classList.add('hidden');
            
            document.getElementById('navigationContainer').style.display = 'block';
            document.getElementById('navigationContainer').classList.remove('hidden');
            
            window.scrollTo(0, 0);
        }
        
        function loadForm(formType) {
            const formContainer = document.getElementById('formContainer');
            
            const formConfig = getFormConfig(formType);
            
            formContainer.innerHTML = `
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                    <!-- Header -->
                    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 ${formConfig.colorClass} rounded-lg flex items-center justify-center">
                                    <span class="text-white text-2xl">${formConfig.icon}</span>
                                </div>
                                <div>
                                    <h1 class="text-2xl font-bold text-gray-900">${formConfig.title}</h1>
                                    <p class="text-gray-600">${formConfig.description}</p>
                                </div>
                            </div>
                            <button id="goBackFromFormHeaderButton" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                                ‚Üê Back to Menu
                            </button>
                        </div>
                    </div>

                    <!-- Form -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <!-- Form Header -->
                        <div class="bg-gradient-to-r ${formConfig.colorClass.replace('bg-', 'from-')} to-${formConfig.colorClass.split('-')[1]}-700 px-8 py-6">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <span class="text-white text-2xl">${formConfig.icon}</span>
                                </div>
                                <div>
                                    <h2 class="text-xl font-bold text-white">Inspection Request Form</h2>
                                    <p class="text-white text-opacity-90 text-sm">Please fill out all required fields accurately</p>
                                </div>
                            </div>
                        </div>

                        <form id="inspectionForm" class="p-8">
                            <!-- Personal Information Section -->
                            <div class="mb-10">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 ${formConfig.colorClass} rounded-full flex items-center justify-center mr-4">
                                        <span class="text-white text-lg">üë§</span>
                                    </div>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900">Personal Information</h3>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 rounded-xl p-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="space-y-2">
                                            <label class="block text-sm font-semibold text-gray-700">Requested By *</label>
                                            <input type="text" name="requestedBy" required
                                                    placeholder="Enter your full name"
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                        </div>
                                        <div class="space-y-2">
                                            <label class="block text-sm font-semibold text-gray-700">Contact Number *</label>
                                            <input type="tel" name="contactNumber" required
                                                    placeholder="e.g., +63 912 345 6789"
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                        </div>
                                        <div class="space-y-2">
                                            <label class="block text-sm font-semibold text-gray-700">Institutional Email *</label>
                                            <input type="email" name="institutionalEmail" required
                                                    placeholder="your.name@pup.edu.ph"
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                        </div>
                                        <div class="space-y-2">
                                            <label class="block text-sm font-semibold text-gray-700">Office/Department *</label>
                                            <input type="text" name="officeDepartment" required
                                                    placeholder="e.g., College of Engineering"
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                        </div>
                                        <div class="space-y-2">
                                            <label class="block text-sm font-semibold text-gray-700">Disbursing Officer *</label>
                                            <input type="text" name="disbursingOfficer" required
                                                    placeholder="Enter disbursing officer name"
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                        </div>
                                        <div class="space-y-2">
                                            <label class="block text-sm font-semibold text-gray-700">Sector *</label>
                                            <select name="sector" required
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 bg-white">
                                                <option value="">Choose your sector</option>
                                                <option value="OP">OP - Office of the President</option>
                                                <option value="OVPC">OVPC - Office of the Vice President for Campuses</option>
                                                <option value="OVPRED">OVPRED - Office of the Vice President for Research, Extension and Development</option>
                                                <option value="OPVA">OPVA - Office of the Vice President for Administration</option>
                                                <option value="OVPAA">OVPAA - Office of the Vice President for Academic Affairs</option>
                                                <option value="VPSS">VPSS - Vice President for Student Services</option>
                                                <option value="OEVP">OEVP - Office of the Executive Vice President</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            ${formConfig.specificFields}

                            <!-- Purpose and Particulars Section -->
                            <div class="mb-10">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 ${formConfig.colorClass} rounded-full flex items-center justify-center mr-4">
                                        <span class="text-white text-lg">üìù</span>
                                    </div>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900">Request Details</h3>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 rounded-xl p-6 space-y-6">
                                    <div class="space-y-2">
                                        <label class="block text-sm font-semibold text-gray-700">Purpose *</label>
                                        <textarea name="purpose" required rows="3"
                                                    placeholder="Describe the purpose of this inspection request in detail..."
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 resize-vertical"></textarea>
                                    </div>
                                    <div class="space-y-2">
                                        <label class="block text-sm font-semibold text-gray-700">Particulars *</label>
                                        <textarea name="particulars" required rows="4"
                                                    placeholder="Provide detailed information about items, services, or materials to be inspected. Include specifications, quantities, and any special requirements..."
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 resize-vertical"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Documentary Requirements Section -->
                            <div class="mb-10">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 ${formConfig.colorClass} rounded-full flex items-center justify-center mr-4">
                                        <span class="text-white text-lg">üìÑ</span>
                                    </div>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900">Documentary Requirements</h3>
                                        <p class="text-gray-600 text-sm">Select all applicable documents</p>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-50 rounded-xl p-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        ${formConfig.documentaryRequirements}
                                    </div>
                                    <div id="othersTextContainer" class="mt-6 hidden">
                                        <div class="bg-white rounded-lg p-4 border-2 border-dashed border-gray-300">
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Please specify other requirements:</label>
                                            <input type="text" name="othersText"
                                                    placeholder="Enter specific requirements not listed above..."
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Amount Section -->
                            <div class="mb-10">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 ${formConfig.colorClass} rounded-full flex items-center justify-center mr-4">
                                        <span class="text-white text-lg">üí∞</span>
                                    </div>
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-900">Amount Information</h3>
                                        <p class="text-gray-600 text-sm">Enter the total amount for this inspection request</p>
                                    </div>
                                </div>
                                
                                <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200">
                                    <div class="flex items-center space-x-4">
                                        <div class="flex-shrink-0">
                                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                                <span class="text-green-600 text-xl font-bold">‚Ç±</span>
                                            </div>
                                        </div>
                                        <div class="flex-1">
                                            <label class="block text-sm font-semibold text-gray-700 mb-2">Total Amount (Philippine Peso) *</label>
                                            <input type="number" name="totalAmount" required step="0.01" min="0"
                                                    placeholder="Enter amount (e.g., 15000.00)"
                                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 text-lg font-semibold">
                                        </div>
                                    </div>
                                    <div class="mt-3 text-xs text-gray-600">
                                        <p>üí° <strong>Tip:</strong> Enter the exact amount as it appears in your supporting documents</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="bg-gray-50 rounded-xl p-6 mt-8">
                                <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4">
                                    <div class="text-sm text-gray-600">
                                        <p class="flex items-center">
                                            <span class="text-red-500 mr-1">*</span>
                                            Required fields must be completed
                                        </p>
                                        <p class="mt-1">Review all information prior to click the submit button</p>
                                    </div>
                                    <div class="flex space-x-4">
                                        <button type="button" id="cancelFormButton"
                                                    class="px-8 py-3 border-2 border-gray-300 rounded-xl text-gray-700 hover:bg-gray-100 transition-all duration-200 font-semibold">
                                            Cancel
                                        </button>
                                        <button type="submit"
                                                    class="px-8 py-3 ${formConfig.colorClass} hover:opacity-90 text-white rounded-xl transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105">
                                            Submit Request ‚Üí
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.getElementById('goBackFromFormHeaderButton').addEventListener('click', goBack);
            document.getElementById('cancelFormButton').addEventListener('click', goBack);
            document.getElementById('inspectionForm').addEventListener('submit', (event) => {
                handleFormSubmit(event, formType);
            });

            // Add event listener for documentary requirements
            const docReqCheckboxes = document.querySelectorAll('input[name="documentaryRequirement"]');
            docReqCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const othersContainer = document.getElementById('othersTextContainer');
                    const othersCheckbox = document.querySelector('input[name="documentaryRequirement"][value="others"]');
                    
                    if (othersCheckbox && othersCheckbox.checked) {
                        othersContainer.classList.remove('hidden');
                        document.querySelector('input[name="othersText"]').required = true;
                    } else {
                        othersContainer.classList.add('hidden');
                        document.querySelector('input[name="othersText"]').required = false;
                    }
                });
            });
            
            // Add event listener for purchase category radio buttons (for purchases form)
            const categoryRadios = document.querySelectorAll('input[name="category"]');
            categoryRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    const othersContainer = document.getElementById('categoryOthersContainer');
                    const othersRadio = document.querySelector('input[name="category"][value="Others"]');

                    if (othersRadio && othersRadio.checked) {
                        othersContainer.classList.remove('hidden');
                        document.querySelector('input[name="categoryOthersText"]').required = true;
                    } else {
                        othersContainer.classList.add('hidden');
                        document.querySelector('input[name="categoryOthersText"]').required = false;
                    }
                });
            });
        }

        function getFormConfig(formType) {
            const configs = {
                purchases: {
                    title: 'Operations Purchase Inspection',
                    description: 'Request inspection for operational purchases',
                    icon: 'üíª',
                    colorClass: 'bg-blue-600',
                    specificFields: `
                        <!-- Category Section -->
                        <div class="mb-10">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-4">
                                    <span class="text-white text-lg">üì¶</span>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-900">Purchase Category</h3>
                                    <p class="text-gray-600 text-sm">Please Choose</p>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <label class="relative flex items-center p-4 bg-white rounded-lg border-2 border-gray-200 hover:border-blue-300 cursor-pointer transition-all duration-200">
                                        <input type="radio" name="category" value="Supplies and Materials" required class="sr-only peer">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                                <span class="text-blue-600 text-sm">üìã</span>
                                            </div>
                                            <span class="text-sm font-medium text-gray-700">Supplies and Materials</span>
                                        </div>
                                        <div class="absolute inset-0 rounded-lg border-2 border-transparent peer-checked:border-blue-500 peer-checked:bg-blue-50"></div>
                                    </label>
                                    <label class="relative flex items-center p-4 bg-white rounded-lg border-2 border-gray-200 hover:border-blue-300 cursor-pointer transition-all duration-200">
                                        <input type="radio" name="category" value="Equipment" required class="sr-only peer">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                                <span class="text-blue-600 text-sm">‚öôÔ∏è</span>
                                            </div>
                                            <span class="text-sm font-medium text-gray-700">Equipment</span>
                                        </div>
                                        <div class="absolute inset-0 rounded-lg border-2 border-transparent peer-checked:border-blue-500 peer-checked:bg-blue-50"></div>
                                    </label>
                                    <label class="relative flex items-center p-4 bg-white rounded-lg border-2 border-gray-200 hover:border-blue-300 cursor-pointer transition-all duration-200">
                                        <input type="radio" name="category" value="Others" required class="sr-only peer">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                                <span class="text-blue-600 text-sm">üìù</span>
                                            </div>
                                            <span class="text-sm font-medium text-gray-700">Others</span>
                                        </div>
                                        <div class="absolute inset-0 rounded-lg border-2 border-transparent peer-checked:border-blue-500 peer-checked:bg-blue-50"></div>
                                    </label>
                                </div>
                                <div id="categoryOthersContainer" class="mt-6 hidden">
                                    <div class="bg-white rounded-lg p-4 border-2 border-dashed border-gray-300">
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Please specify category:</label>
                                        <input type="text" name="categoryOthersText"
                                                placeholder="Enter specific category not listed above..."
                                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    documentaryRequirements: `
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="salesInvoice" class="mr-3 text-blue-600 focus:ring-blue-500">
                            <span class="text-sm font-medium text-gray-700">Sales Invoice/Official Receipt</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="approvedPurchase" class="mr-3 text-blue-600 focus:ring-blue-500">
                            <span class="text-sm font-medium text-gray-700">Approved Purchase Request</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="specialOrder" class="mr-3 text-blue-600 focus:ring-blue-500">
                            <span class="text-sm font-medium text-gray-700">Special Order/Line Item Budget</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="others" class="mr-3 text-blue-600 focus:ring-blue-500">
                            <span class="text-sm font-medium text-gray-700">Others</span>
                        </label>
                    `
                },
                ucss: {
                    title: 'UCSS Purchases Inspection',
                    description: 'Request inspection for UCSS purchases',
                    icon: 'üõí',
                    colorClass: 'bg-green-600',
                    specificFields: `
                        <!-- Category Section -->
                        <div class="mb-10">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center mr-4">
                                    <span class="text-white text-lg">üõçÔ∏è</span>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-900">UCSS Purchase Category</h3>
                                    <p class="text-gray-600 text-sm">Please choose the type of UCSS purchase</p>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 rounded-xl p-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <label class="relative flex items-center p-4 bg-white rounded-lg border-2 border-gray-200 hover:border-green-300 cursor-pointer transition-all duration-200">
                                        <input type="radio" name="category" value="Food" required class="sr-only peer">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                                <span class="text-green-600 text-sm">üçΩÔ∏è</span>
                                            </div>
                                            <span class="text-sm font-medium text-gray-700">Food</span>
                                        </div>
                                        <div class="absolute inset-0 rounded-lg border-2 border-transparent peer-checked:border-green-500 peer-checked:bg-green-50"></div>
                                    </label>
                                    <label class="relative flex items-center p-4 bg-white rounded-lg border-2 border-gray-200 hover:border-green-300 cursor-pointer transition-all duration-200">
                                        <input type="radio" name="category" value="Others" required class="sr-only peer">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                                <span class="text-green-600 text-sm">üìù</span>
                                            </div>
                                            <span class="text-sm font-medium text-gray-700">Others</span>
                                        </div>
                                        <div class="absolute inset-0 rounded-lg border-2 border-transparent peer-checked:border-green-500 peer-checked:bg-green-50"></div>
                                    </label>
                                </div>
                                <div id="categoryOthersContainer" class="mt-6 hidden">
                                    <div class="bg-white rounded-lg p-4 border-2 border-dashed border-gray-300">
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Please specify category:</label>
                                        <input type="text" name="categoryOthersText"
                                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 hover:border-gray-400">
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    documentaryRequirements: `
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-green-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="approvedBudget" class="mr-3 text-green-600 focus:ring-green-500">
                            <span class="text-sm font-medium text-gray-700">Approved Budget Proposal</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-green-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="approvedPurchase" class="mr-3 text-green-600 focus:ring-green-500">
                            <span class="text-sm font-medium text-gray-700">Approved Purchase Request</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-green-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="salesInvoice" class="mr-3 text-green-600 focus:ring-green-500">
                            <span class="text-sm font-medium text-gray-700">Sales Invoice/Official Receipt</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-green-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="others" class="mr-3 text-green-600 focus:ring-green-500">
                            <span class="text-sm font-medium text-gray-700">Others</span>
                        </label>
                    `
                },
                postRepair: {
                    title: 'Post Repair Inspection',
                    description: 'Request inspection for Post-repair inspection and waste material disposal',
                    icon: 'üîß',
                    colorClass: 'bg-purple-600',
                    specificFields: `
                        <!-- Category Section -->
                        <div class="mb-8">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">
                                üîß Repair Category
                            </h3>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Equipment Repair" required class="mr-3">
                                    <span class="text-sm text-gray-700">Equipment Repair</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Hardware Supplies for Repair" required class="mr-3">
                                    <span class="text-sm text-gray-700">Hardware Supplies for Repair</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Waste Material Disposal" required class="mr-3">
                                    <span class="text-sm text-gray-700">Waste Material Disposal</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Others" required class="mr-3">
                                    <span class="text-sm text-gray-700">Others</span>
                                </label>
                            </div>
                            <div id="categoryOthersContainer" class="mt-4 hidden">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Please specify:</label>
                                <input type="text" name="categoryOthersText"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                        placeholder="Please specify category...">
                            </div>
                        </div>
                    `,
                    documentaryRequirements: `
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-purple-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="proofSurrender" class="mr-3 text-purple-600 focus:ring-purple-500">
                            <span class="text-sm font-medium text-gray-700">Proof of Surrendered Waste</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-purple-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="endorsementLetter" class="mr-3 text-purple-600 focus:ring-purple-500">
                            <span class="text-sm font-medium text-gray-700">Endorsement Letter</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-purple-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="others" class="mr-3 text-purple-600 focus:ring-purple-500">
                            <span class="text-sm font-medium text-gray-700">Others</span>
                        </label>
                    `
                },
                janitorial: {
                    title: 'Janitorial Supplies and Services Inspection',
                    description: 'Cleaning services and janitorial supplies inspection',
                    icon: 'üßπ',
                    colorClass: 'bg-orange-600',
                    specificFields: `
                        <!-- Category Section -->
                        <div class="mb-8">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4 border-b border-gray-200 pb-2">
                                üßπ Service Category
                            </h3>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Cleaning Supplies" required class="mr-3">
                                    <span class="text-sm text-gray-700">Cleaning Supplies</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Janitorial Equipment" required class="mr-3">
                                    <span class="text-sm text-gray-700">Janitorial Equipment</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Janitorial Services" required class="mr-3">
                                    <span class="text-sm text-gray-700">Janitorial Services</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="category" value="Others" required class="mr-3">
                                    <span class="text-sm text-gray-700">Others</span>
                                </label>
                            </div>
                            <div id="categoryOthersContainer" class="mt-4 hidden">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Please specify:</label>
                                <input type="text" name="categoryOthersText"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                        placeholder="Please specify category...">
                            </div>
                        </div>
                    `,
                    documentaryRequirements: `
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="salesInvoice" class="mr-3 text-orange-600 focus:ring-orange-500">
                            <span class="text-sm font-medium text-gray-700">Sales Invoice/Official Receipt</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="approvedPurchase" class="mr-3 text-orange-600 focus:ring-orange-500">
                            <span class="text-sm font-medium text-gray-700">Approved Purchase Request</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="specialOrder" class="mr-3 text-orange-600 focus:ring-orange-500">
                            <span class="text-sm font-medium text-gray-700">Special Order/Line Item Budget</span>
                        </label>
                        <label class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-orange-300 cursor-pointer transition-all duration-200">
                            <input type="checkbox" name="documentaryRequirement" value="others" class="mr-3 text-orange-600 focus:ring-orange-500">
                            <span class="text-sm font-medium text-gray-700">Others</span>
                        </label>
                    `
                }
            };

            return configs[formType];
        }

        async function handleFormSubmit(event, formType) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                if (key === 'documentaryRequirement') {
                    if (!data[key]) {
                        data[key] = [];
                    }
                    data[key].push(value);
                } else {
                    data[key] = value;
                }
            }
            
            data.purchaseType = formType;
            data.timestamp = new Date().toLocaleString();
            data.userId = userId;
            data.controlNumber = await generateControlNumber();
            
            currentFormData = data;
            
            await saveFormData(data);
            
            let messageBox = document.createElement('div');
            messageBox.innerHTML = `
                <div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[9999]">
                    <div class="bg-white rounded-lg p-6 shadow-xl max-w-sm mx-auto">
                        <div class="flex items-center space-x-4 mb-4">
                            <span class="text-green-500 text-2xl">‚úÖ</span>
                            <h3 class="text-lg font-bold">Success!</h3>
                        </div>
                        <p class="text-sm text-gray-700">Form submitted successfully! Redirecting to the formatted display.</p>
                        <div class="flex justify-end mt-6">
                            <button id="okButton" class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg transition-colors">
                                OK
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(messageBox);

            document.getElementById('okButton').addEventListener('click', () => {
                messageBox.remove();
                showFormatDisplay(currentFormData);
            });
        }

        function showFormatDisplay(data) {
            document.getElementById('formContainer').style.display = 'none';
            document.getElementById('formContainer').classList.add('hidden');
            document.getElementById('viewFormsContainer').style.display = 'none';
            document.getElementById('viewFormsContainer').classList.add('hidden');
            
            document.getElementById('formatDisplayContainer').style.display = 'block';
            document.getElementById('formatDisplayContainer').classList.remove('hidden');
            
            window.scrollTo(0, 0);
            
            generateFormattedDisplay(data);
        }

        function generateFormattedDisplay(entry) {
            const container = document.getElementById('formatDisplayContainer');
            
            const formPagesWrapper = document.createElement('div');
            formPagesWrapper.className = 'form-pages-wrapper';
            
            for (let i = 1; i <= 2; i++) {
                const copyLabel = i === 1 ? 'IMO COPY' : 'SECOND COPY';
                const formContainer = createFormContainer(entry, i, copyLabel);
                formPagesWrapper.appendChild(formContainer);
            }
            
            container.innerHTML = '';
            container.appendChild(formPagesWrapper);
            
            addNavigationButtons();
            
            setTimeout(() => {
                fillFormData(entry, 1);
                fillFormData(entry, 2);
            }, 200);
        }

        function createFormContainer(entry, formNumber, copyLabel) {
            const formContainer = document.createElement('div');
            formContainer.className = 'form-container';
            
            const copyClass = formNumber === 1 ? 'imo-copy' : 'second-copy';
            
            formContainer.innerHTML = `
                <!-- Header Section -->
                <div class="header-section">
                    <img src="https://www.pup.edu.ph/resources/images/logo200.png" alt="PUP Logo" class="logo" onerror="this.src='https://placehold.co/70x70/FFFFFF/000000?text=LOGO';">
                    <div class="header-text">
                        <p>Republic of the Philippines</p>
                        <p>Polytechnic University of the Philippines</p>
                        <p>OFFICE OF EXECUTIVE VICE PRESIDENT</p>
                        <p>Inspection Management Office</p>
                    </div>
                    <div class="control-info">
                        <p>PUP-RIOS-2-IMAO-003</p>
                        <p>Effectivity Date: June 18, 2025</p>
                        <p>Rev 1</p>
                        <div style="display: flex; align-items: center; gap: 8px; justify-content: flex-end;">
                            <span style="font-weight: bold;">Control No:</span>
                            <div class="control-no-line" id="controlNumber${formNumber}" style="min-width: 120px; text-align: center;"></div>
                        </div>
                        <div style="margin-top: 8px; text-align: right;">
                            <span class="copy-label-inline ${copyClass}">${copyLabel}</span>
                        </div>
                    </div>
                </div>

                <div class="form-title">Request Form for Inspection of:</div>

                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="operationsPurchase${formNumber}" disabled>
                        <label for="operationsPurchase${formNumber}">Operations Purchase (Cash Advance, Internal Funded, External Funded)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="postRepair${formNumber}" disabled>
                        <label for="postRepair${formNumber}">Post-Repair/Waste Material</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ucssPurchase${formNumber}" disabled>
                        <label for="ucssPurchase${formNumber}">UCSS Purchases</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="janitorialServices${formNumber}" disabled>
                        <label for="janitorialServices${formNumber}">Janitorial Services</label>
                    </div>
                </div>

                <div class="section-divider"></div>

                <div class="input-row">
                    <span class="input-label">Date and Time Requested:</span>
                    <div class="input-field" id="dateTimeRequested${formNumber}"></div>
                    <span class="input-label ml-10">Requested by:</span>
                    <div class="input-field" id="requestedBy${formNumber}"></div>
                </div>
                <div class="input-row">
                    <span class="input-label">Office/Department:</span>
                    <div class="input-field" id="officeDepartment${formNumber}"></div>
                    <span class="input-label ml-10">Name of Disbursing Officer:</span>
                    <div class="input-field" id="disbursingOfficer${formNumber}"></div>
                </div>
                <div class="input-row">
                    <span class="input-label">Purpose:</span>
                    <div class="input-field" id="purposeField${formNumber}"></div>
                    <span class="input-label ml-10">Particulars:</span>
                    <div class="input-field" id="particularsField${formNumber}"></div>
                </div>

                <div class="section-divider"></div>

                <div class="documentary-requirements">
                    <div class="documentary-requirements-title">
                        <div class="text-center italic font-bold">***** To be filled-out by Inspectors *****</div>
                        <div class="text-left font-bold mt-2">Documentary Requirements: ( &#10003; or NA)</div>
                    </div>
                    <div class="documentary-requirements-grid">
                        <div class="checkbox-item">
                            <input type="checkbox" id="salesInvoice${formNumber}" disabled>
                            <label for="salesInvoice${formNumber}">Sales Invoice/Official Receipt</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="specialOrder${formNumber}" disabled>
                            <label for="specialOrder${formNumber}">Special Order / Line-item budget</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="approvedPurchase${formNumber}" disabled>
                            <label for="approvedPurchase${formNumber}">Approved Purchase Request</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="requestPostRepair${formNumber}" disabled>
                            <label for="requestPostRepair${formNumber}">Request for Post-Repair and Inspection</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="proofSurrendered${formNumber}" disabled>
                            <label for="proofSurrendered${formNumber}">Proof of surrendered waste materials</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="inventoryCustodian${formNumber}" disabled>
                            <label for="inventoryCustodian${formNumber}">Inventory Custodian Slip</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="propertyAcknowledge${formNumber}" disabled>
                            <label for="propertyAcknowledge${formNumber}">Property Acknowledge Receipt</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="cnas${formNumber}" disabled>
                            <label for="cnas${formNumber}">CNAS</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="others${formNumber}" disabled>
                            <label for="others${formNumber}">Others:</label>
                            <div class="input-field flex-grow" id="othersField${formNumber}"></div>
                        </div>
                    </div>
                </div>

                <!-- New structure for remarks and tables -->
                <div class="main-content-wrapper">
                    <div class="top-section">
                        <div class="remarks-legend">
                            <p>Remarks:</p>
                            <p><b>C ‚Äì</b> <i>Complied</i></p>
                            <p><b>N.C ‚Äì</b> <i>Not Complied</i></p>
                        </div>

                        <div class="first-table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Document In<br>Date and Time</th>
                                        <th>Document Out<br>Date and Time</th>
                                        <th>Remarks</th>
                                        <th>C / N.C</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                    </tr>
                                    <tr>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                    </tr>
                                    <tr>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                        <td>&nbsp;</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Bottom section with inspector information table -->
                    <div class="bottom-section">
                        <div class="inspector-info-section">
                            <div class="bottom-left-table-container flex-col" style="display: flex; flex-direction: column; width: 60%;">
                                <div class="inspector-signature-row border-t border-l border-r border-black" id="inspector-row-1-${formNumber}"></div>
                                <div class="inspector-signature-row border-t border-l border-r border-black" id="inspector-row-2-${formNumber}"></div>
                                <div class="inspector-signature-row border border-black" id="inspector-row-3-${formNumber}"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return formContainer;
        }

        function addNavigationButtons() {
            const container = document.getElementById('formatDisplayContainer');
            
            const buttonsContainer = document.createElement('div');
            buttonsContainer.className = 'no-print fixed bottom-6 right-6 flex flex-col space-y-3 z-50';
            buttonsContainer.innerHTML = `
                <button id="printButton"
                        class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg shadow-lg transition-colors font-semibold">
                    üñ®Ô∏è Print Forms
                </button>
                <button id="backFromDisplayButton"
                        class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg shadow-lg transition-colors font-semibold">
                    ‚Üê Back to Menu
                </button>
            `;
            
            container.appendChild(buttonsContainer);
            
            document.getElementById('printButton').addEventListener('click', () => window.print());
            document.getElementById('backFromDisplayButton').addEventListener('click', goBack);
            
            setTimeout(() => {
                fillFormData(currentFormData, 1);
                fillFormData(currentFormData, 2);
            }, 200);
        }

        function fillFormData(entry, formNumber) {
            const controlNumberElement = document.getElementById(`controlNumber${formNumber}`);
            if (controlNumberElement && entry.controlNumber) {
                controlNumberElement.textContent = entry.controlNumber;
                controlNumberElement.style.color = '#000';
                controlNumberElement.style.fontWeight = 'bold';
                controlNumberElement.style.background = 'transparent';
            }

            if (entry.purchaseType === 'purchases') {
                const checkbox = document.getElementById(`operationsPurchase${formNumber}`);
                if (checkbox) checkbox.checked = true;
            } else if (entry.purchaseType === 'ucss') {
                const checkbox = document.getElementById(`ucssPurchase${formNumber}`);
                if (checkbox) checkbox.checked = true;
            } else if (entry.purchaseType === 'postRepair') {
                const checkbox = document.getElementById(`postRepair${formNumber}`);
                if (checkbox) checkbox.checked = true;
            } else if (entry.purchaseType === 'janitorial') {
                const checkbox = document.getElementById(`janitorialServices${formNumber}`);
                if (checkbox) checkbox.checked = true;
            }

            const dateTimeElement = document.getElementById(`dateTimeRequested${formNumber}`);
            if (dateTimeElement) {
                dateTimeElement.textContent = entry.timestamp || new Date().toLocaleString();
            }

            const fieldMappings = {
                'requestedBy': `requestedBy${formNumber}`,
                'officeDepartment': `officeDepartment${formNumber}`,
                'disbursingOfficer': `disbursingOfficer${formNumber}`,
                'purpose': `purposeField${formNumber}`,
                'particulars': `particularsField${formNumber}`
            };
            
            Object.entries(fieldMappings).forEach(([entryField, elementId]) => {
                const element = document.getElementById(elementId);
                if (element && entry[entryField]) {
                    element.textContent = entry[entryField];
                }
            });

            if (entry.documentaryRequirement && Array.isArray(entry.documentaryRequirement)) {
                entry.documentaryRequirement.forEach(requirement => {
                    let checkboxId = '';
                    switch (requirement) {
                        case 'salesInvoice':
                            checkboxId = `salesInvoice${formNumber}`;
                            break;
                        case 'approvedPurchase':
                            checkboxId = `approvedPurchase${formNumber}`;
                            break;
                        case 'specialOrder':
                            checkboxId = `specialOrder${formNumber}`;
                            break;
                        case 'proofSurrender':
                            checkboxId = `proofSurrendered${formNumber}`;
                            break;
                        case 'others':
                            checkboxId = `others${formNumber}`;
                            const othersField = document.getElementById(`othersField${formNumber}`);
                            if (othersField) {
                                othersField.textContent = entry.othersText;
                            }
                            break;
                        case 'approvedBudget':
                            checkboxId = `approvedBudget${formNumber}`;
                            break;
                        case 'endorsementLetter':
                            checkboxId = `endorsementLetter${formNumber}`;
                            break;
                        case 'cnas':
                            checkboxId = `cnas${formNumber}`;
                            break;
                        case 'inventoryCustodian':
                            checkboxId = `inventoryCustodian${formNumber}`;
                            break;
                        case 'propertyAcknowledge':
                            checkboxId = `propertyAcknowledge${formNumber}`;
                            break;
                    }
                    
                    if (checkboxId) {
                        const checkbox = document.getElementById(checkboxId);
                        if (checkbox) {
                            checkbox.checked = true;
                        }
                    }
                });
            }
        }
    </script>
</body>
</html>
